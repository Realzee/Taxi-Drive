<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Association Dashboard - TaxiDrive</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="./assets/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="./css/style.css">
    
    </head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <img id="association-logo" src="assets/Logo1.png" alt="Association Logo" style="display: none; height: 40px; margin-right: 10px; border-radius: 4px;">
                <img id="main-logo" src="assets/Logo1.png" alt="TaxiDrive Logo" style="height: 40px; margin-right: 10px;">
                <h1>TaxiDrive</h1>
            </div>
            <div class="header-right">
                <div class="user-profile" id="user-profile">
                    <div class="user-avatar" id="user-avatar">A</div>
                    <div class="user-info">
                        <div class="user-name" id="user-name">Loading...</div>
                        <div class="user-role" id="user-role">Association</div>
                        <div class="association-name" id="association-name" style="font-size: 10px; opacity: 0.9; line-height: 1.2; margin-top: 2px;">Loading Association...</div>
                    </div>
                </div>
                <div class="header-icons">
                    <i class="fas fa-bell" id="notifications-btn"></i>
                    <i class="fas fa-sign-out-alt" id="logout-btn"></i>
                </div>
            </div>
        </header>

        <!-- App Content -->
        <div class="app-content">
            <!-- Association Header Section -->
            <div class="association-header-section" style="background: linear-gradient(135deg, var(--dark-blue), var(--light-blue)); color: white; padding: 30px 20px; text-align: center; margin-bottom: 20px;">
                <div class="association-header-content">
                    <div class="association-logo-container" style="margin-bottom: 15px;">
                        <img id="association-logo-main" src="" alt="Association Logo" style="display: none; height: 80px; width: 80px; border-radius: 50%; border: 4px solid rgba(255, 255, 255, 0.3); background: white; padding: 8px;">
                        <img id="main-logo-main" src="assets/Logo1.png" alt="TaxiDrive Logo" style="height: 80px; width: 80px; border-radius: 50%; border: 4px solid rgba(255, 255, 255, 0.3); background: white; padding: 8px;">
                    </div>
                    <h1 class="association-name-main" id="association-name-main" style="font-size: 28px; font-weight: 700; margin: 0 0 10px 0; text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);">Loading Association...</h1>
                    <p class="association-subtitle" style="font-size: 16px; opacity: 0.9; margin: 0; font-weight: 500;">
                        <i class="fas fa-building"></i> Association Management Dashboard
                    </p>
                    <div class="association-stats" style="display: flex; justify-content: center; gap: 30px; margin-top: 20px; flex-wrap: wrap;">
                        <div class="stat-item" style="text-align: center;">
                            <div class="stat-value" id="association-registered-count" style="font-size: 24px; font-weight: 700;">0</div>
                            <div class="stat-label" style="font-size: 12px; opacity: 0.9;">Registered Owners</div>
                        </div>
                        <div class="stat-item" style="text-align: center;">
                            <div class="stat-value" id="association-active-count" style="font-size: 24px; font-weight: 700;">0</div>
                            <div class="stat-label" style="font-size: 12px; opacity: 0.9;">Active Owners</div>
                        </div>
                        <div class="stat-item" style="text-align: center;">
                            <div class="stat-value" id="association-pending-count" style="font-size: 24px; font-weight: 700;">0</div>
                            <div class="stat-label" style="font-size: 12px; opacity: 0.9;">Pending Approvals</div>
                        </div>
                    </div>
                    <div class="association-actions" style="margin-top: 20px; text-align: center;">
                        <button class="btn btn-primary" id="edit-association-profile-btn" style="padding: 10px 20px; font-size: 14px;">
                            <i class="fas fa-edit"></i> Edit Association Profile
                        </button>
                    </div>
                </div>
            </div>

            <!-- Owner Registration Section -->
            <div class="dashboard-section">
                <div class="section-header">
                    <h2 class="section-title">Owner Registration</h2>
                    <button class="refresh-btn" id="refresh-registration">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>

                <div style="background: var(--white); border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); padding: 20px; margin-bottom: 20px;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <i class="fas fa-user-plus" style="font-size: 48px; color: var(--light-blue); margin-bottom: 15px;"></i>
                        <h3 style="color: var(--dark-blue); margin: 0 0 10px 0;">Register New Owner</h3>
                        <p style="color: #666; margin: 0;">Create a new owner account with Supabase Authentication</p>
                    </div>
                    <button class="btn btn-primary" id="register-new-owner-btn" style="width: 100%; padding: 12px; font-size: 16px;">
                        <i class="fas fa-plus"></i> Register New Owner
                    </button>
                </div>
            </div>

            <!-- Owner Approval Dashboard -->
            <div class="dashboard-section">
                <div class="section-header">
                    <h2 class="section-title">Owner Approval Dashboard</h2>
                    <button class="refresh-btn" id="refresh-dashboard">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>

                <!-- Statistics Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="pending-count">0</div>
                        <div class="stat-label">Pending Owners</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="approved-count">0</div>
                        <div class="stat-label">Approved Today</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="rejected-count">0</div>
                        <div class="stat-label">Rejected Today</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="total-owners">0</div>
                        <div class="stat-label">Total Owners</div>
                    </div>
                </div>

                <!-- Pending Owners Section -->
                <div class="pending-owners-list" id="pending-owners-section">
                    <div class="section-header">
                        <h3 class="section-title">Pending Owner Approvals</h3>
                    </div>
                    <div id="pending-owners-content">
                        <!-- Pending owners will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Registered Owners Dashboard -->
            <div class="dashboard-section">
                <div class="section-header">
                    <h2 class="section-title">Registered Owners Dashboard</h2>
                    <button class="refresh-btn" id="refresh-registered-owners">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>

                <!-- Association Name Display -->
                <div style="background: var(--white); border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); padding: 15px; margin-bottom: 20px; text-align: center; border-left: 4px solid var(--light-blue);">
                    <h3 style="color: var(--dark-blue); margin: 0 0 5px 0;">
                        <i class="fas fa-building"></i> Association: <span id="dashboard-association-name">Loading...</span>
                    </h3>
                    <p style="color: #666; margin: 0; font-size: 14px;">All registered members belong to this association</p>
                </div>

                <!-- Registered Owners Statistics Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="registered-count">0</div>
                        <div class="stat-label">Total Registered</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="active-owners-count">0</div>
                        <div class="stat-label">Active Owners</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="inactive-owners-count">0</div>
                        <div class="stat-label">Inactive Owners</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="updated-today-count">0</div>
                        <div class="stat-label">Updated Today</div>
                    </div>
                </div>

                <!-- Registered Owners List -->
                <div class="pending-owners-list" id="registered-owners-section">
                    <div class="section-header">
                        <h3 class="section-title">Registered Owners</h3>
                    </div>
                    <div id="registered-owners-content">
                        <!-- Registered owners will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Registered Drivers Dashboard -->
            <div class="dashboard-section">
                <div class="section-header">
                    <h2 class="section-title">Registered Drivers Dashboard</h2>
                    <button class="refresh-btn" id="refresh-drivers">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>

                <!-- Association Name Display -->
                <div style="background: var(--white); border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); padding: 15px; margin-bottom: 20px; text-align: center; border-left: 4px solid var(--light-blue);">
                    <h3 style="color: var(--dark-blue); margin: 0 0 5px 0;">
                        <i class="fas fa-building"></i> Association: <span id="drivers-dashboard-association-name">Loading...</span>
                    </h3>
                    <p style="color: #666; margin: 0; font-size: 14px;">All registered drivers belong to this association</p>
                </div>

                <!-- Drivers Statistics Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="total-drivers-count">0</div>
                        <div class="stat-label">Total Drivers</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="active-drivers-count">0</div>
                        <div class="stat-label">Active Drivers</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="inactive-drivers-count">0</div>
                        <div class="stat-label">Inactive Drivers</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="drivers-with-vehicles-count">0</div>
                        <div class="stat-label">With Vehicles</div>
                    </div>
                </div>

                <!-- Registered Drivers List -->
                <div class="pending-owners-list" id="drivers-section" style="max-height: 500px; overflow-y: auto;">
                    <div class="section-header">
                        <h3 class="section-title">Registered Drivers</h3>
                    </div>
                    <div id="drivers-content">
                        <!-- Drivers will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Your existing modals remain exactly the same -->
        <!-- [Keep all your modal HTML from the Firebase version] -->

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-item active" data-nav="home">
                <i class="fas fa-home"></i>
                <div>Home</div>
            </div>
            <div class="nav-item" data-nav="map">
                <i class="fas fa-map-marker-alt"></i>
                <div>Map</div>
            </div>
            <div class="nav-item" data-nav="wallet">
                <i class="fas fa-wallet"></i>
                <div>Wallet</div>
            </div>
            <div class="nav-item" data-nav="profile">
                <i class="fas fa-user"></i>
                <div>Profile</div>
            </div>
        </div>
    </div>

    <!-- Supabase Script -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/association-dashboard.js"></script>
</body>
</html>
